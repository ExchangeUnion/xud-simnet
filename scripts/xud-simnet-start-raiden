#!/bin/bash

cd ~/xud-simnet
shopt -s expand_aliases
source setup.bash

activate_venv

EndpointRegistry="0x5a4F3a91B28bfCbDE780Cbd12dA2A992a3e0b564"
SecretRegistry="0x891A1718D69dba34fD4e8c646c52342C57fb705E"
TokenNetworkRegistry="0x9133dC1d16390806c4f9c22293f96D044F6FDd39"
env="production"

address_file=~/xud-simnet/raiden-wd/address
if [ ! -f $address_file ]; then
	echo "raiden was not properlly installed"
	exit 1
fi
tail -1 $address_file
address=`grep "Address" $address_file |cut -d " " -f 2`
passwd_file=~/xud-simnet/raiden-wd/passwd_file
datadir=~/xud-simnet/raiden-wd/exchange
keystore=~/xud-simnet/raiden-wd/keystore

cd  ~/xud-simnet/raiden-wd
raiden --datadir $datadir --keystore-path $keystore  --network-id 4321 --accept-disclaimer --address $address --rpc --api-address 0.0.0.0:5001 --environment-type $env  --password-file $passwd_file --no-sync-check --accept-disclaimer --tokennetwork-registry-contract-address $TokenNetworkRegistry --secret-registry-contract-address $SecretRegistry --endpoint-registry-contract-address $EndpointRegistry --gas-price 10000000000 --eth-rpc-endpoint 35.231.222.142:8546  --matrix-server https://raidentransport.exchangeunion.com --resolver-endpoint http://localhost:8887/resolveraiden

deactivate
